---
import { legacyRedirects } from '../data/legacy-redirects';

export const prerender = true;

export function getStaticPaths() {
  return legacyRedirects.map((redirect) => ({
    params: {
      redirect: redirect.from.replace(/^\/+/, ''),
    },
    props: {
      redirect,
    },
  }));
}

const { redirect } = Astro.props;
const target = redirect.to;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="refresh" content={`0; url=${target}`} />
    <link rel="canonical" href={target} />
    <meta name="robots" content="noindex, nofollow" />
    <title>Redirecting...</title>
  </head>
  <body>
    <p>
      Redirecting to <a href={target}>{target}</a>.
    </p>
    <script>
      window.location.replace({JSON.stringify(target)});
    </script>
  </body>
</html>
